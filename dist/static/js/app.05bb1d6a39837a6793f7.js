webpackJsonp([1],{35:function(t,n,i){function e(t){i(80)}var s=i(33)(i(39),i(89),e,null,null);t.exports=s.exports},37:function(t,n,i){"use strict";var e=i(43),s=i.n(e),o=i(44),r=i.n(o),a=function(){function t(n,i){s()(this,t),this.x=n,this.y=i}return r()(t,[{key:"compare",value:function(t){return this.y===t.y?this.x-t.x:this.y-t.y}}]),t}();n.a=a},38:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i(36),s=i(35),o=i.n(s);e.a.config.productionTip=!1,new e.a({el:"#app",template:"<App/>",components:{App:o.a}})},39:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i(88),s=i.n(e);n.default={name:"app",components:{Drawable:s.a}}},40:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i(45),s=i.n(e),o=i(16),r=i.n(o),a=i(37),h=i(46),c=i.n(h);n.default={mounted:function(){this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.restart()},data:function(){return{canvas:{},context:{},canvasHeight:500,canvasWidth:900,overPoint:null,dragMode:!1,finishedGame:!1,connectedWithOverPoint:null,pointSize:10,pointsCount:10,intersectedCount:0,strokeStyle:"darkgrey",fillStyle:"#fff",lines:[],points:[],edges:null}},computed:{},methods:{restart:function(){this.lines=[],this.edges=null,this.finishedGame=!1,this.clearPoints(),this.generatePoints(),this.triangulate(),this.arrangePoints(),this.connectPoints(),this.drawAllNodes()},matchPoints:function(t,n){return!(n.x>t.x+this.pointSize)&&(!(n.x<t.x-this.pointSize)&&(!(n.y>t.y+this.pointSize)&&!(n.y<t.y-this.pointSize)))},clear:function(){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight)},easyLevel:function(){this.pointsCount=8,this.restart()},fairLevel:function(){this.pointsCount=10,this.restart()},toughLevel:function(){this.pointsCount=15,this.restart()},crazyLevel:function(){this.pointsCount=30,this.restart()},clearPoints:function(){this.points=[],this.clear()},getMousePos:function(t){var n=this.context.canvas.getBoundingClientRect();return{x:parseInt((t.clientX-n.left)/(n.right-n.left)*this.canvasWidth),y:parseInt((t.clientY-n.top)/(n.bottom-n.top)*this.canvasHeight)}},mouseup:function(t){var n=this,i=this.getMousePos(t);this.dragMode&&this.overPoint?(this.dragPoint(this.overPoint,i),this.dragMode=!1,this.points.forEach(function(t){n.drawCircle(t,n.pointSize)}),0!==this.intersectedCount||this.finishedGame||this.playWin()):this.connectedWithOverPoint=null},dragPoint:function(t,n){var i=this;this.finishedGame||this.points.map(function(e){e.x===t.x&&e.y===t.y&&(e.x=n.x,e.y=n.y,i.clear(),i.drawAllNodes())})},mousemove:function(t){var n=this.getMousePos(t);this.dragMode&&this.overPoint&&this.dragPoint(this.overPoint,n)},mousedown:function(t){var n=this.getMousePos(t);this.isMouseOnNode(n)?(this.findConnectedWithOverPoint(),this.dragMode=!0):this.dragMode=!1},isMouseOnNode:function(t){return null!==this.selectedPoint(t)},selectedPoint:function(t){var n=!0,i=!1,e=void 0;try{for(var s,o=r()(this.points);!(n=(s=o.next()).done);n=!0){var a=s.value;if(this.matchPoints(a,t))return this.overPoint=a,a}}catch(t){i=!0,e=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw e}}return this.overPoint=null,null},addNode:function(t){this.context.save(),this.drawNode(t),this.context.restore(),this.points.push(t)},isIntersect:function(t,n){var i=t.endPoint.y-t.startPoint.y,e=t.startPoint.x-t.endPoint.x,s=i*t.startPoint.x+e*t.startPoint.y,o=n.endPoint.y-n.startPoint.y,r=n.startPoint.x-n.endPoint.x,a=o*n.startPoint.x+r*n.startPoint.y,h=i*r-o*e;if(0===h)return!1;var c=(r*s-e*a)/h,u=(i*a-o*s)/h;return!(!this.isInBetween(t.startPoint.x,c,t.endPoint.x)&&!this.isInBetween(t.startPoint.y,u,t.endPoint.y)||!this.isInBetween(n.startPoint.x,c,n.endPoint.x)&&!this.isInBetween(n.startPoint.y,u,n.endPoint.y))},isInBetween:function(t,n,i){return!(Math.abs(t-n)<1e-6||Math.abs(n-i)<1e-6)&&(t<n&&n<i||i<n&&n<t)},drawNode:function(t){this.context.beginPath(),this.context.moveTo(t.x-this.pointSize,t.y-this.pointSize),this.context.lineTo(t.x-this.pointSize,t.y+this.pointSize),this.context.lineTo(t.x+this.pointSize,t.y+this.pointSize),this.context.lineTo(t.x+this.pointSize,t.y-this.pointSize),this.context.lineTo(t.x-this.pointSize,t.y-this.pointSize),this.context.fillStyle=this.fillStyle,this.context.fill(),this.context.strokeStyle=this.strokeStyle,this.context.stroke()},findConnectedWithOverPoint:function(){var t=this;if(!this.connectedWithOverPoint||this.connectedWithOverPoint.overPoint!==this.overPoint){var n=[];this.lines.forEach(function(i){var e=i.startPoint,s=i.endPoint;i.isIntersected;e===t.overPoint?n.push(s):s===t.overPoint&&n.push(e)}),this.connectedWithOverPoint={overPoint:this.overPoint,connectedPoints:n}}},isPointConnectWithOverPoint:function(t){return this.overPoint===t||!!this.connectedWithOverPoint&&(!(!this.connectedWithOverPoint.connectedPoints||!this.connectedWithOverPoint.connectedPoints.includes(t))||void 0)},drawCircle:function(t,n){this.context.fillStyle=this.isPointConnectWithOverPoint(t)&&this.dragMode?"#DA0":"#d46",this.context.beginPath(),this.context.arc(t.x,t.y,n,0,2*Math.PI,!0),this.context.closePath(),this.context.fill()},Line:function(t,n,i){return{startPoint:t,endPoint:n,isIntersected:i}},drawLine:function(t,n,i,e,s){this.context.beginPath(),this.context.moveTo(t,n),this.context.lineTo(i,e),this.context.lineWidth=2,this.context.strokeStyle=s?"navy":"#43e3bc",this.context.stroke()},generatePoints:function(){for(var t=0;t<this.pointsCount;t++){var n=30+Math.floor(Math.random()*(this.canvasWidth-60)),i=30+Math.floor(Math.random()*(this.canvasHeight-60));this.points.push(new a.a(n,i))}},arrangePoints:function(){for(var t=0;t<this.pointsCount-4;t++){var n=Math.floor(this.canvasWidth/2+150*Math.cos(2*Math.PI*t/(this.pointsCount-4))),i=Math.floor(this.canvasHeight/2+150*Math.sin(2*Math.PI*t/(this.pointsCount-4)));this.points[t]=new a.a(n,i)}for(var e=0;e<4;e++){var s=Math.floor(this.canvasWidth/2+70*Math.cos(2*Math.PI*e/4)),o=Math.floor(this.canvasHeight/2+70*Math.sin(2*Math.PI*e/4));this.points[this.pointsCount-e-1]=new a.a(s,o)}},connectPoints:function(){var t=this;this.lines=[],this.edges.forEach(function(n){var i=s()(n,2),e=i[0],o=i[1];t.lines.push(t.Line(t.points[e],t.points[o],!1))})},triangulate:function(){this.lines=[];var t=this.points.map(function(t){return[t.x,t.y]}),n=c()(t,this.edges||[],{exterior:!0}),i=[];n.forEach(function(t){var n=s()(t,3),e=n[0],o=n[1],r=n[2];i.push([e,o]),i.push([o,r]),i.push([r,e])}),this.edges||(this.edges=i)},playWin:function(){this.finishedGame=!0,new Audio("static/tada.mp3").play()},updateLineIntersection:function(){this.intersectedCount=0;for(var t=0;t<this.lines.length;t++){var n=this.lines[t];n.isIntersected=!1;for(var i=0;i<t;i++){var e=this.lines[i];this.isIntersect(n,e)&&(this.intersectedCount=this.intersectedCount+1,n.isIntersected=!0,e.isIntersected=!0,this.lines[t]=n,this.lines[i]=e)}}},drawAllLines:function(){var t=this;this.updateLineIntersection(),this.lines.forEach(function(n){var i=n.startPoint,e=n.endPoint,s=n.isIntersected;t.drawLine(i.x,i.y,e.x,e.y,s)})},drawAllNodes:function(){this.context.save(),this.connectPoints(),this.drawAllLines();var t=!0,n=!1,i=void 0;try{for(var e,s=r()(this.points);!(t=(e=s.next()).done);t=!0){var o=e.value;this.drawCircle(o,this.pointSize)}}catch(t){n=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(n)throw i}}this.context.restore()}}}},80:function(t,n){},81:function(t,n){},88:function(t,n,i){function e(t){i(81)}var s=i(33)(i(40),i(90),e,null,null);t.exports=s.exports},89:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"ui",attrs:{id:"app"}},[i("drawable")],1)},staticRenderFns:[]}},90:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"flex"},[i("div",[t._m(0,!1,!1),t._v(" "),i("div",{staticClass:"button-bar"},[i("button",{on:{click:t.restart}},[t._v("Restart Game")]),t._v(" "),i("button",{on:{click:t.easyLevel}},[t._v("Easy")]),t._v(" "),i("button",{on:{click:t.fairLevel}},[t._v("Fair")]),t._v(" "),i("button",{on:{click:t.toughLevel}},[t._v("Tough")]),t._v(" "),i("button",{on:{click:t.crazyLevel}},[t._v("Crazy")])])]),t._v(" "),i("div",{staticClass:"canvas-container"},[t.finishedGame?i("div",{staticClass:"youwin"},[t._v("You Win")]):t._e(),t._v(" "),i("canvas",{ref:"canvas",attrs:{width:t.canvasWidth,height:t.canvasHeight},on:{mousedown:t.mousedown,mouseup:t.mouseup,mousemove:t.mousemove}})])])},staticRenderFns:[function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("h1",[i("a",{attrs:{href:"https://github.com/ibrahim/untangled"}},[t._v("Untangled")])])}]}}},[38]);
//# sourceMappingURL=app.05bb1d6a39837a6793f7.js.map